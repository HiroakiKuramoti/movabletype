<mt:unless name="invalid_source">

<div id="content-type-field-<mt:var name="content_field_id" escape="html">" class="content-type-field-container content-field" data-mt-content-type-name="<mt:var name="content_type_name" escape="html">" <mt:var name="required"> <mt:var name="multiple">>

<mt:loop name="content_data_loop">
  <div class="mt-collapse" data-mt-count="<mt:var name="__counter__" escape="html">">
    <input type="hidden" name="content-field-<mt:var name="content_field_id" escape="html">" value="<mt:var name="cd_id" escape="html">" />
    <div class="mt-collapse__container">
      <div class="col">
        <a href="<mt:var name="script_url">?__mode=view&_type=content_data&blog_id=<mt:var name="blog_id">&content_type_id=<mt:var name="cd_content_type_id" escape="html">&id=<mt:var name="cd_id" escape="html">" target="_blank">(ID:<mt:var name="cd_id" escape="html">)</a>
      </div>
      <div class="col-auto">
        <a data-toggle="collapse" href="#collapse<mt:var name="__counter__" escape="html">" aria-expanded="false" aria-controls="collapse<mt:var name="__counter__" escape="html">">
          <mtapp:svgicon id="ic_collapse" title="Collapse" color="secondary">
        </a>
      </div>
    </div>
    <div class="collapse mt-collapse__content" id="collapse<mt:var name="__counter__" escape="html">">
      <div class="row">
        <div class="col">
          <mt:var name="cd_data" to_json="1">
          <a href="javascript:void(0)" class="btn btn-default remove float-right">
            <__trans phrase="Remove">
          </a>
        </div>
      </div>
    </div>
  </div>
</mt:loop>
  <div class="alert alert-info mb-0">
    <__trans phrase="No [_1]" params="<mt:var name="content_type_name" escape="html">">
  </div>

  <div class="mt-3">
    <a href="<mt:var name="script_url">?__mode=dialog_content_data_modal&blog_id=<mt:var name="blog_id">&content_field_id=<mt:var name="content_field_id">" class="mt-open-dialog mt-modal-open d-inline-block" data-mt-modal-large>
      <mtapp:svgicon id="ic_add" title="Add" color="primary" size="sm">
  <mt:if name="multiple">
      <__trans phrase="Add [_1]" params="<mt:var name="content_type_name" escape="html">">
  <mt:else>
      <__trans phrase="Choose [_1]" params="<mt:var name="content_type_name" escape="html">">
  </mt:if>
    </a>
  </div>
</div>

<mt:unless name="loaded_content_type_field_js">
  <mt:var name="loaded_content_type_field_js" value="1">

  <mt:setvarblock name="jq_js_include" append="1">
jQuery('.content-type-field-container').on('click', 'a.remove', function () {
  jQuery(this).parents('.mt-collapse').remove();

  var $container = jQuery(this).parents('.content-type-field-container');
  if ($container.data('mtValidator')) {
    $container.mtValid({ focus: false });
  }

  setDirty(true);
  log('found dirty form');
  app.setDirty();
});
  </mt:setvarblock>

  <mt:setvarblock name="css_include" append="1">
<style>
.content-type-field-container div:not(:first-child).alert {
  display: none;
}
</style>
  </mt:setvarblock>

</mt:unless>

<mt:else>
<div class="alert alert-warning">
  <__trans phrase="This field is disabled because valid Content Type is not selected in this field.">
</div>
</mt:unless>
