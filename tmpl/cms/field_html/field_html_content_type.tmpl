<div id="content-type-field-<mt:var name="content_field_id" escape="html">" class="content-type-field-container content-field" data-mt-content-type-name="<mt:var name="content_type_name" escape="html">" <mt:var name="required"> <mt:var name="multiple">>
  <ul id="content-field-<mt:var name="content_field_id" escape="html">-list-content-data" class="content-data-list">
<mt:loop name="content_data_loop">
    <li>
      <input type="hidden" name="content-field-<mt:var name="content_field_id" escape="html">" value="<mt:var name="cd_id" escape="html">" />
      <a href="<mt:var name="script_url">?__mode=edit_content_data&blog_id=<mt:var name="blog_id">&content_type_id=<mt:var name="content_type_id" escape="html">&id=<mt:var name="cd_id" escape="html">" target="_blank"><mt:var name="cd_title" escape="html"></a>
      <a href="javascript:void(0)" class="icon-remove icon16 action-icon" style="cursor: pointer"></a>
    </li>
</mt:loop>
<mt:unless name="content_data_loop">
    <li class="empty-content-data-list">
      <__trans phrase="No [_1]" params="<mt:var name="content_type_name" escape="html">">
    </li>
</mt:unless>
  </ul>
  <a href="<mt:var name="script_url">?__mode=dialog_content_data_modal&blog_id=<mt:var name="blog_id">&content_field_id=<mt:var name="content_field_id">" class="mt-open-dialog mt-modal-open" data-mt-modal-large>
    <__trans phrase="Choose [_1]" params="<mt:var name="content_type_name" escape="html">">
  </a>
</div>

<mt:unless name="loaded_content_type_field_js">
  <mt:var name="loaded_content_type_field_js" value="1">
  <mt:setvarblock name="jq_js_include" append="1">
jQuery('ul.content-data-list').on('click', 'li > a.icon-remove', function () {
  var $ul = jQuery(this).parents('ul.content-data-list');
  jQuery(this).parent().remove();
  if ($ul.children('li').length == 0) {
      var $emptyLi = jQuery('<li/>').addClass('empty-content-data-list')
                                    .text('<__trans phrase="No [_1]" params="<mt:var name="content_type_name" escape="js">">');
      $ul.append($emptyLi);
  }

  var contentFieldId = '<mt:var name="content_field_id" escape="html">';
  var containerId = 'content-type-field-<mt:var name="content_field_id" escape="html">';
  var container = document.getElementById(containerId);
  var ns = jQuery.data(container, 'mtValidator');
  if (ns) {
    jQuery(container).mtValid({ focus: false });
  }

  setDirty(true);
  log('found dirty form');
  app.setDirty();
});
  </mt:setvarblock>
</mt:unless>
