<mt:setvar name="page_title" value="<__trans phrase="Content Type Settings">">
<mt:setvar name="position_actions_bottom" value="1">
<mt:setvar name="screen_id" value="manage-content-type">
<mt:setvar name="screen_class" value="content-type">
    
<mt:setvarblock name="system_msg">
<div id="msg-block"></div>
  <mt:if name="saved">
    <mtapp:statusmsg
       id="saved"
       class="success">
      <__trans phrase="Contents type settings has been saved.">
    </mtapp:statusmsg>
  </mt:if>
  <mt:if name="err_msg">
    <mtapp:statusmsg
       id="err_msg"
       class="error"
       can_close="0">
      <mt:var name="err_msg">
    </mtapp:statusmsg>
  </mt:if>
</mt:setvarblock>
        
<mt:setvarblock name="list_actions">
<div class="button-actions actions">
  <button type="button" class="save action primary button disabled" disabled="disabled"><__trans phrase="Save Changes"></button>
</div>
</mt:setvarblock>

<mt:setvarblock name="html_head" append="1">
<link rel="stylesheet" href="<$mt:var name="static_uri"$>plugins/ContentType/css/content-type.css?v=<$mt:var name="mt_version_id" escape="url"$>">
</mt:setvarblock>

<mt:setvarblock name="js_include" append="1">
<script type="text/javascript" src="<mt:var name="static_uri">plugins/ContentType/js/cms.js?v=<$mt:var name="mt_version_id" escape="url"$>"></script>
</mt:setvarblock>

<mt:include name="include/header.tmpl" id="header_include">

<mtapp:form id="content-type-form" name="content-type-form" mode="save_cfg_content_type">
  <input type="hidden" name="cfg_screen" value="cfg_content_type" />
  <input type="hidden" name="blog_id" value="<mt:var name="blog_id">" />
  <input type="hidden" id="current_field_id" value="" />

  <mtapp:settinggroup id="content_type">

    <h2 id="setting-title" ><__trans phrase="Content Type"></h2>

    <mtapp:setting
       id="unique_key"
       label="<__trans phrase="Unique Key">">
      <mt:var name="unique_key" escape="html">
    </mtapp:setting>

  </mtapp:settinggroup>

  <mtapp:settinggroup id="content-fields">

    <h2><__trans phrase="Content Fields"></h2>

      <div id="add-block" class="icon-create icon-left">
        <select name="type" id="type">" class="half-width required">
        <mt:loop name="content_field_types">
        <option value="<mt:var name="type">"<mt:if name="selected"> selected="selected"</mt:if>><mt:var name="label"></option>
        </mt:loop>
        </select>
        <span class="item-add"><a href="javascript:void(0);" class="add-link"> <__trans phrase="Add content field"></a></span>
      </div>

      <div id="sortable" class="sortable"></div>

  </mtapp:settinggroup>

  <mtapp:settinggroup id="single_line_text-options">

    <mtapp:setting
       id="single_line_text-label"
       label="<__trans phrase="Label">">
      <input type="text" name="single_line_text-label" id="single_line_text-label" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="single_line_text-hint"
       label="<__trans phrase="Hint">">
      <input type="text" name="single_line_text-hint" id="single_line_text-hint" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="single_line_text-required"
       label="<__trans phrase="Required">">
      <input type="checkbox" name="single_line_text-required" id="single_line_text-required" /> <label for="single_line_text-required"><__trans phrase="Required or not."></label>
    </mtapp:setting>

    <mtapp:setting
       id="single_line_text-display"
       label="<__trans phrase="Display">">
      <select name="single_line_text-display" id="single_line_text-display">
        <option value="force"><__trans phrase="Force"></option>
        <option value="default" selected="selected"><__trans phrase="Default"></option>
        <option value="optional"><__trans phrase="Optional"></option>
        <option value="none"><__trans phrase="None"></option>
      </select>
    </mtapp:setting>

    <mtapp:setting
       id="single_line_text-min_length"
       label="<__trans phrase="Min Length">">
      <input type="text" name="single_line_text-min_length" id="single_line_text-min_length" class="text num" />
    </mtapp:setting>

    <mtapp:setting
       id="single_line_text-max_length"
       label="<__trans phrase="Max Length">">
      <input type="text" name="single_line_text-max_length" id="single_line_text-max_length" class="text num" />
    </mtapp:setting>

    <mtapp:setting
       id="single_line_text-initial_value"
       label="<__trans phrase="Initial Value">">
      <input type="text" name="single_line_text-initial_value" id="single_line_text-initial_value" class="text long" />
    </mtapp:setting>

    <div id="save-block" class="icon-save icon-left">
      <span class="item-save"><a href="javascript:void(0);" class="save-link"> <__trans phrase="Save content field options"></a></span>
    </div>

  </mtapp:settinggroup>

  <mtapp:settinggroup id="multi_line_text-options">

    <mtapp:setting
       id="multi_line_text-label"
       label="<__trans phrase="Label">">
      <input type="text" name="multi_line_text-label" id="multi_line_text-label" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="multi_line_text-hint"
       label="<__trans phrase="Hint">">
      <input type="text" name="multi_line_text-hint" id="multi_line_text-hint" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="multi_line_text-required"
       label="<__trans phrase="Required">">
      <input type="checkbox" name="multi_line_text-required" id="multi_line_text-required" /> <label for="multi_line_text-required"><__trans phrase="Required or not."></label>
    </mtapp:setting>

    <mtapp:setting
       id="multi_line_text-display"
       label="<__trans phrase="Display">">
      <select name="multi_line_text-display" id="multi_line_text-display">
        <option value="force"><__trans phrase="Force"></option>
        <option value="default" selected="selected"><__trans phrase="Default"></option>
        <option value="optional"><__trans phrase="Optional"></option>
        <option value="none"><__trans phrase="None"></option>
      </select>
    </mtapp:setting>

    <mtapp:setting
       id="multi_line_text-initial_value"
       label="<__trans phrase="Initial Value">">
      <input type="text" name="multi_line_text-initial_value" id="multi_line_text-initial_value" class="text long" />
    </mtapp:setting>

    <mtapp:setting
       id="multi_line_text-input_format"
       label="<__trans phrase="Input format">">
      <select name"multi_line_text-input_format" id="multi_line_text-input_format">
        <option value=""><__trans phrase="Input format is not selected"></option>
        <option value="plain_text"><__trans phrase="Plain Text"></option>
        <option value="wysiwyg"><__trans phrase="WYSIWYG"></option>
        <option value="markdown"><__trans phrase="Markdown"></option>
        <option value="convert_breaks"><__trans phrase="Convert Breaks"></option>
        <option value="block"><__trans phrase="Block"></option>
      </select>
    </mtapp:setting>

    <div id="save-block" class="icon-save icon-left">
      <span class="item-save"><a href="javascript:void(0);" class="save-link"> <__trans phrase="Save content field options"></a></span>
    </div>

  </mtapp:settinggroup>

  <mtapp:settinggroup id="integer-options">

    <mtapp:setting
       id="integer-label"
       label="<__trans phrase="Label">">
      <input type="text" name="integer-label" id="integer-label" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="integer-hint"
       label="<__trans phrase="Hint">">
      <input type="text" name="integer-hint" id="integer-hint" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="integer-required"
       label="<__trans phrase="Required">">
      <input type="checkbox" name="integer-required" id="integer-required" /> <label for="integer-required"><__trans phrase="Required or not."></label>
    </mtapp:setting>

    <mtapp:setting
       id="integer-display"
       label="<__trans phrase="Display">">
      <select name="integer-display" id="integer-display">
        <option value="force"><__trans phrase="Force"></option>
        <option value="default" selected="selected"><__trans phrase="Default"></option>
        <option value="optional"><__trans phrase="Optional"></option>
        <option value="none"><__trans phrase="None"></option>
      </select>
    </mtapp:setting>

    <mtapp:setting
       id="integer-min_value"
       label="<__trans phrase="Min Value">">
      <input type="text" name="integer-min_value" id="integer-min_value" class="text num" />
    </mtapp:setting>

    <mtapp:setting
       id="integer-max_value"
       label="<__trans phrase="Max Value">">
      <input type="text" name="integer-max_value" id="integer-max_value" class="text num" />
    </mtapp:setting>

    <mtapp:setting
       id="integer-initial_value"
       label="<__trans phrase="Initial Value">">
      <input type="text" name="integer-initial_value" id="integer-initial_value" class="text num" />
    </mtapp:setting>

    <div id="save-block" class="icon-save icon-left">
      <span class="item-save"><a href="javascript:void(0);" class="save-link"> <__trans phrase="Save content field options"></a></span>
    </div>

  </mtapp:settinggroup>

  <mtapp:settinggroup id="float-options">

    <mtapp:setting
       id="float-label"
       label="<__trans phrase="Label">">
      <input type="text" name="float-label" id="float-label" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="float-hint"
       label="<__trans phrase="Hint">">
      <input type="text" name="float-hint" id="float-hint" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="float-required"
       label="<__trans phrase="Required">">
      <input type="checkbox" name="float-required" id="float-required" /> <label for="float-required"><__trans phrase="Required or not."></label>
    </mtapp:setting>

    <mtapp:setting
       id="float-display"
       label="<__trans phrase="Display">">
      <select name="float-display" id="float-display">
        <option value="force"><__trans phrase="Force"></option>
        <option value="default" selected="selected"><__trans phrase="Default"></option>
        <option value="optional"><__trans phrase="Optional"></option>
        <option value="none"><__trans phrase="None"></option>
      </select>
    </mtapp:setting>

    <mtapp:setting
       id="float-min_value"
       label="<__trans phrase="Min Value">">
      <input type="text" name="float-min_value" id="float-min_value" class="text num" />
    </mtapp:setting>

    <mtapp:setting
       id="float-max_value"
       label="<__trans phrase="Max Value">">
      <input type="text" name="float-max_value" id="float-max_value" class="text num" />
    </mtapp:setting>

    <mtapp:setting
       id="float-decimal_places"
       label="<__trans phrase="Number of decimal places">">
      <input type="text" name="float-decimal_places" id="float-decimal_places" class="text num" />
    </mtapp:setting>

    <mtapp:setting
       id="float-initial_value"
       label="<__trans phrase="Initial Value">">
      <input type="text" name="float-initial_value" id="float-initial_value" class="text num" />
    </mtapp:setting>

    <div id="save-block" class="icon-save icon-left">
      <span class="item-save"><a href="javascript:void(0);" class="save-link"> <__trans phrase="Save content field options"></a></span>
    </div>

  </mtapp:settinggroup>

  <mtapp:settinggroup id="url-options">

    <mtapp:setting
       id="url-label"
       label="<__trans phrase="Label">">
      <input type="text" name="url-label" id="url-label" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="url-hint"
       label="<__trans phrase="Hint">">
      <input type="text" name="url-hint" id="url-hint" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="url-required"
       label="<__trans phrase="Required">">
      <input type="checkbox" name="url-required" id="url-required" /> <label for="url-required"><__trans phrase="Required or not."></label>
    </mtapp:setting>

    <mtapp:setting
       id="url-display"
       label="<__trans phrase="Display">">
      <select name="url-display" id="url-display">
        <option value="force"><__trans phrase="Force"></option>
        <option value="default" selected="selected"><__trans phrase="Default"></option>
        <option value="optional"><__trans phrase="Optional"></option>
        <option value="none"><__trans phrase="None"></option>
      </select>
    </mtapp:setting>

    <mtapp:setting
       id="url-initial_value"
       label="<__trans phrase="Initial Value">">
      <input type="text" name="url-initial_value" id="url-initial_value" class="text med" />
    </mtapp:setting>

    <div id="save-block" class="icon-save icon-left">
      <span class="item-save"><a href="javascript:void(0);" class="save-link"> <__trans phrase="Save content field options"></a></span>
    </div>

  </mtapp:settinggroup>

  <mtapp:settinggroup id="date_and_time-options">

    <mtapp:setting
       id="date_and_time-label"
       label="<__trans phrase="Label">">
      <input type="text" name="date_and_time-label" id="date_and_time-label" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="date_and_time-hint"
       label="<__trans phrase="Hint">">
      <input type="text" name="date_and_time-hint" id="date_and_time-hint" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="date_and_time-required"
       label="<__trans phrase="Required">">
      <input type="checkbox" name="date_and_time-required" id="date_and_time-required" /> <label for="date_and_time-required"><__trans phrase="Required or not."></label>
    </mtapp:setting>

    <mtapp:setting
       id="date_and_time-display"
       label="<__trans phrase="Display">">
      <select name="date_and_time-display" id="date_and_time-display">
        <option value="force"><__trans phrase="Force"></option>
        <option value="default" selected="selected"><__trans phrase="Default"></option>
        <option value="optional"><__trans phrase="Optional"></option>
        <option value="none"><__trans phrase="None"></option>
      </select>
    </mtapp:setting>

    <mtapp:setting
       id="date_and_time-initial_value"
       label="<__trans phrase="Initial Value">">
      <span><input type="text" name="date_and_time-initial_date" id="date_and_time-initial_date" class="text date text-date" value="" placeholder="YYYY-MM-DD" /></span> <span class="separator"><__trans phrase="@"></span> <span><input type="text" name="date_and_time-initial_time" id="date_and_time-initial_time" class="text time" value="" placeholder="HH:mm:ss" /></span>
    </mtapp:setting>

    <div id="save-block" class="icon-save icon-left">
      <span class="item-save"><a href="javascript:void(0);" class="save-link"> <__trans phrase="Save content field options"></a></span>
    </div>

  </mtapp:settinggroup>

  <mtapp:settinggroup id="date-options">

    <mtapp:setting
       id="date-label"
       label="<__trans phrase="Label">">
      <input type="text" name="date-label" id="date-label" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="date-hint"
       label="<__trans phrase="Hint">">
      <input type="text" name="date-hint" id="date-hint" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="date-required"
       label="<__trans phrase="Required">">
      <input type="checkbox" name="date-required" id="date-required" /> <label for="date-required"><__trans phrase="Required or not."></label>
    </mtapp:setting>

    <mtapp:setting
       id="date-display"
       label="<__trans phrase="Display">">
      <select name="date-display" id="date-display">
        <option value="force"><__trans phrase="Force"></option>
        <option value="default" selected="selected"><__trans phrase="Default"></option>
        <option value="optional"><__trans phrase="Optional"></option>
        <option value="none"><__trans phrase="None"></option>
      </select>
    </mtapp:setting>

    <mtapp:setting
       id="date-initial_value"
       label="<__trans phrase="Initial Value">">
      <input type="text" name="date-initial_value" id="date-initial_value" class="text date text-date" value="" placeholder="YYYY-MM-DD" /></span>
    </mtapp:setting>

    <div id="save-block" class="icon-save icon-left">
      <span class="item-save"><a href="javascript:void(0);" class="save-link"> <__trans phrase="Save content field options"></a></span>
    </div>

  </mtapp:settinggroup>

  <mtapp:settinggroup id="time-options">

    <mtapp:setting
       id="time-label"
       label="<__trans phrase="Label">">
      <input type="text" name="time-label" id="time-label" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="time-hint"
       label="<__trans phrase="Hint">">
      <input type="text" name="time-hint" id="time-hint" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="time-required"
       label="<__trans phrase="Required">">
      <input type="checkbox" name="time-required" id="time-required" /> <label for="time-required"><__trans phrase="Required or not."></label>
    </mtapp:setting>

    <mtapp:setting
       id="time-display"
       label="<__trans phrase="Display">">
      <select name="time-display" id="time-display">
        <option value="force"><__trans phrase="Force"></option>
        <option value="default" selected="selected"><__trans phrase="Default"></option>
        <option value="optional"><__trans phrase="Optional"></option>
        <option value="none"><__trans phrase="None"></option>
      </select>
    </mtapp:setting>

    <mtapp:setting
       id="time-initial_value"
       label="<__trans phrase="Initial Value">">
      <input type="text" name="time-initial_value" id="time-initial_value" class="text time" value="" placeholder="HH:mm:ss" />
    </mtapp:setting>

    <div id="save-block" class="icon-save icon-left">
      <span class="item-save"><a href="javascript:void(0);" class="save-link"> <__trans phrase="Save content field options"></a></span>
    </div>

  </mtapp:settinggroup>

  <mtapp:settinggroup id="select_box-options">

    <mtapp:setting
       id="select_box-label"
       label="<__trans phrase="Label">">
      <input type="text" name="select_box-label" id="select_box-label" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="select_box-hint"
       label="<__trans phrase="Hint">">
      <input type="text" name="select_box-hint" id="select_box-hint" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="select_box-required"
       label="<__trans phrase="Required">">
      <input type="checkbox" name="select_box-required" id="select_box-required" /> <label for="select_box-required"><__trans phrase="Required or not."></label>
    </mtapp:setting>

    <mtapp:setting
       id="select_box-display"
       label="<__trans phrase="Display">">
      <select name="select_box-display" id="select_box-display">
        <option value="force"><__trans phrase="Force"></option>
        <option value="default" selected="selected"><__trans phrase="Default"></option>
        <option value="optional"><__trans phrase="Optional"></option>
        <option value="none"><__trans phrase="None"></option>
      </select>
    </mtapp:setting>

    <mtapp:setting
      id="select_box-values"
      label="<__trans phrase="Values">">
      <a href="javascript:void(0)" class="add-values-list"><img src="<mt:var name="static_uri">images/status_icons/create.gif" /></a>
    </mtapp:setting>

    <mtapp:setting
      id="select_box-multiple"
      label="<__trans phrase="Multiple">">
      <label>
        <input type="checkbox" name="select_box-multiple" id="select_box-multiple" />
        <__trans phrase="Enable multiple selection">
      </label>
    </mtapp:setting>

    <mtapp:setting
       id="select_box-min"
       label="<__trans phrase="Min">">
      <input type="text" name="select_box-min" id="select_box-min" class="text num" />
    </mtapp:setting>

    <mtapp:setting
       id="select_box-max"
       label="<__trans phrase="Max">">
      <input type="text" name="select_box-max" id="select_box-max" class="text num" />
    </mtapp:setting>

    <mtapp:setting
       id="select_box-initial_value"
       label="<__trans phrase="Initial Value">">
      <input type="text" name="select_box-initial_value" id="select_box-initial_value" class="text med" />
    </mtapp:setting>

    <div id="save-block" class="icon-save icon-left">
      <span class="item-save"><a href="javascript:void(0);" class="save-link"> <__trans phrase="Save content field options"></a></span>
    </div>

  </mtapp:settinggroup>

  <mtapp:settinggroup id="radio-options">

    <mtapp:setting
       id="radio-label"
       label="<__trans phrase="Label">">
      <input type="text" name="radio-label" id="radio-label" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="radio-hint"
       label="<__trans phrase="Hint">">
      <input type="text" name="radio-hint" id="radio-hint" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="radio-required"
       label="<__trans phrase="Required">">
      <input type="checkbox" name="radio-required" id="radio-required" /> <label for="radio-required"><__trans phrase="Required or not."></label>
    </mtapp:setting>

    <mtapp:setting
       id="radio-display"
       label="<__trans phrase="Display">">
      <select name="radio-display" id="radio-display">
        <option value="force"><__trans phrase="Force"></option>
        <option value="default" selected="selected"><__trans phrase="Default"></option>
        <option value="optional"><__trans phrase="Optional"></option>
        <option value="none"><__trans phrase="None"></option>
      </select>
    </mtapp:setting>

    <mtapp:setting
      id="radio-values"
      label="<__trans phrase="Values">">
      <a href="javascript:void(0)" class="add-values-list"><img src="<mt:var name="static_uri">images/status_icons/create.gif" /></a>
    </mtapp:setting>

    <mtapp:setting
       id="radio-initial_value"
       label="<__trans phrase="Initial Value">">
      <input type="text" name="radio-initial_value" id="radio-initial_value" class="text med" />
    </mtapp:setting>

    <div id="save-block" class="icon-save icon-left">
      <span class="item-save"><a href="javascript:void(0);" class="save-link"> <__trans phrase="Save content field options"></a></span>
    </div>

  </mtapp:settinggroup>

  <mtapp:settinggroup id="checkbox-options">

    <mtapp:setting
       id="checkbox-label"
       label="<__trans phrase="Label">">
      <input type="text" name="checkbox-label" id="checkbox-label" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="checkbox-hint"
       label="<__trans phrase="Hint">">
      <input type="text" name="checkbox-hint" id="checkbox-hint" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="checkbox-required"
       label="<__trans phrase="Required">">
      <input type="checkbox" name="checkbox-required" id="checkbox-required" /> <label for="checkbox-required"><__trans phrase="Required or not."></label>
    </mtapp:setting>

    <mtapp:setting
       id="checkbox-display"
       label="<__trans phrase="Display">">
      <select name="checkbox-display" id="checkbox-display">
        <option value="force"><__trans phrase="Force"></option>
        <option value="default" selected="selected"><__trans phrase="Default"></option>
        <option value="optional"><__trans phrase="Optional"></option>
        <option value="none"><__trans phrase="None"></option>
      </select>
    </mtapp:setting>

    <mtapp:setting
      id="checkbox-multiple"
      label="<__trans phrase="Multiple">">
      <label>
        <input type="checkbox" name="checkbox-multiple" id="checkbox-multiple" />
        <__trans phrase="Enable multiple selection">
      </label>
    </mtapp:setting>

    <mtapp:setting
       id="checkbox-min"
       label="<__trans phrase="Min">">
      <input type="text" name="checkbox-min" id="checkbox-min" class="text num" />
    </mtapp:setting>

    <mtapp:setting
       id="checkbox-max"
       label="<__trans phrase="Max">">
      <input type="text" name="checkbox-max" id="checkbox-max" class="text num" />
    </mtapp:setting>

    <mtapp:setting
      id="checkbox-values"
      label="<__trans phrase="Values">">
      <a href="javascript:void(0)" class="add-values-list"><img src="<mt:var name="static_uri">images/status_icons/create.gif" /></a>
    </mtapp:setting>

    <mtapp:setting
       id="checkbox-initial_value"
       label="<__trans phrase="Initial Value">">
      <input type="text" name="checkbox-initial_value" id="checkbox-initial_value" class="text med" />
    </mtapp:setting>

    <div id="save-block" class="icon-save icon-left">
      <span class="item-save"><a href="javascript:void(0);" class="save-link"> <__trans phrase="Save content field options"></a></span>
    </div>

  </mtapp:settinggroup>

  <mtapp:settinggroup id="embed_text-options">

    <mtapp:setting
       id="embed_text-label"
       label="<__trans phrase="Label">">
      <input type="text" name="embed_text-label" id="embed_text-label" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="embed_text-hint"
       label="<__trans phrase="Hint">">
      <input type="text" name="embed_text-hint" id="embed_text-hint" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="embed_text-required"
       label="<__trans phrase="Required">">
      <input type="checkbox" name="embed_text-required" id="embed_text-required" /> <label for="embed_text-required"><__trans phrase="Required or not."></label>
    </mtapp:setting>

    <mtapp:setting
       id="embed_text-display"
       label="<__trans phrase="Display">">
      <select name="embed_text-display" id="embed_text-display">
        <option value="force"><__trans phrase="Force"></option>
        <option value="default" selected="selected"><__trans phrase="Default"></option>
        <option value="optional"><__trans phrase="Optional"></option>
        <option value="none"><__trans phrase="None"></option>
      </select>
    </mtapp:setting>

    <div id="save-block" class="icon-save icon-left">
      <span class="item-save"><a href="javascript:void(0);" class="save-link"> <__trans phrase="Save content field options"></a></span>
    </div>

  </mtapp:settinggroup>

  <mtapp:settinggroup id="content_type-options">

    <mtapp:setting
       id="content_type-label"
       label="<__trans phrase="Label">">
      <input type="text" name="content_type-label" id="content_type-label" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="content_type-hint"
       label="<__trans phrase="Hint">">
      <input type="text" name="content_type-hint" id="content_type-hint" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="content_type-required"
       label="<__trans phrase="Required">">
      <input type="checkbox" name="content_type-required" id="content_type-required" /> <label for="content_type-required"><__trans phrase="Required or not."></label>
    </mtapp:setting>

    <mtapp:setting
       id="content_type-display"
       label="<__trans phrase="Display">">
      <select name="content_type-display" id="content_type-display">
        <option value="force"><__trans phrase="Force"></option>
        <option value="default" selected="selected"><__trans phrase="Default"></option>
        <option value="optional"><__trans phrase="Optional"></option>
        <option value="none"><__trans phrase="None"></option>
      </select>
    </mtapp:setting>

    <mtapp:setting
      id="content_type-multiple"
      label="<__trans phrase="Multiple">">
      <label>
        <input type="checkbox" name="content_type-multiple" id="content_type-multiple" />
        <__trans phrase="Enable multiple selection">
      </label>
    </mtapp:setting>

    <mtapp:setting
       id="content_type-can_add"
       label="<__trans phrase="Can add">">
      <input type="checkbox" name="content_type-can_add" id="content_type-can_add" /> <label for="content_type-can_add"><__trans phrase="Can add or not."></label>
    </mtapp:setting>

    <mtapp:setting
       id="content_type-min"
       label="<__trans phrase="Min">">
      <input type="text" name="content_type-min" id="content_type-min" class="text num" />
    </mtapp:setting>

    <mtapp:setting
       id="content_type-max"
       label="<__trans phrase="Max">">
      <input type="text" name="content_type-max" id="content_type-max" class="text num" />
    </mtapp:setting>

    <mtapp:setting
       id="content_type-content_type"
       label="<__trans phrase="Content Type">">
      <select name="content_type-content_type" id="content_type-content_type">
      <mt:loop name="content_types">
        <option value="<mt:var name="id" escape="html">"><mt:var name="name" escape="html"></option>
      </mt:loop>
      </select>
    </mtapp:setting>

    <div id="save-block" class="icon-save icon-left">
      <span class="item-save"><a href="javascript:void(0);" class="save-link"> <__trans phrase="Save content field options"></a></span>
    </div>

  </mtapp:settinggroup>

  <mtapp:settinggroup id="asset-options">

    <mtapp:setting
       id="asset-label"
       label="<__trans phrase="Label">">
      <input type="text" name="asset-label" id="asset-label" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="asset-hint"
       label="<__trans phrase="Hint">">
      <input type="text" name="asset-hint" id="asset-hint" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="asset-required"
       label="<__trans phrase="Required">">
      <input type="checkbox" name="asset-required" id="asset-required" /> <label for="asset-required"><__trans phrase="Required or not."></label>
    </mtapp:setting>

    <mtapp:setting
       id="asset-display"
       label="<__trans phrase="Display">">
      <select name="asset-display" id="asset-display">
        <option value="force"><__trans phrase="Force"></option>
        <option value="default" selected="selected"><__trans phrase="Default"></option>
        <option value="optional"><__trans phrase="Optional"></option>
        <option value="none"><__trans phrase="None"></option>
      </select>
    </mtapp:setting>

    <mtapp:setting
      id="asset-multiple"
      label="<__trans phrase="Multiple">">
      <label>
        <input type="checkbox" name="asset-multiple" id="asset-multiple" />
        <__trans phrase="Enable multiple selection">
      </label>
    </mtapp:setting>

    <mtapp:setting
      id="asset-can_upload"
      label="<__trans phrase="Can Upload">">
      <label>
        <input type="checkbox" name="asset-can_upload" id="asset-can_upload" />
        <__trans phrase="Can upload or not">
      </label>
    </mtapp:setting>

    <mtapp:setting
       id="asset-min"
       label="<__trans phrase="Min">">
      <input type="text" name="asset-min" id="asset-min" class="text num" />
    </mtapp:setting>

    <mtapp:setting
       id="asset-max"
       label="<__trans phrase="Max">">
      <input type="text" name="asset-max" id="asset-max" class="text num" />
    </mtapp:setting>

    <div id="save-block" class="icon-save icon-left">
      <span class="item-save"><a href="javascript:void(0);" class="save-link"> <__trans phrase="Save content field options"></a></span>
    </div>

  </mtapp:settinggroup>

  <mtapp:settinggroup id="audio-options">

    <mtapp:setting
       id="audio-label"
       label="<__trans phrase="Label">">
      <input type="text" name="audio-label" id="audio-label" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="audio-hint"
       label="<__trans phrase="Hint">">
      <input type="text" name="audio-hint" id="audio-hint" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="audio-required"
       label="<__trans phrase="Required">">
      <input type="checkbox" name="audio-required" id="audio-required" /> <label for="audio-required"><__trans phrase="Required or not."></label>
    </mtapp:setting>

    <mtapp:setting
       id="audio-display"
       label="<__trans phrase="Display">">
      <select name="audio-display" id="audio-display">
        <option value="force"><__trans phrase="Force"></option>
        <option value="default" selected="selected"><__trans phrase="Default"></option>
        <option value="optional"><__trans phrase="Optional"></option>
        <option value="none"><__trans phrase="None"></option>
      </select>
    </mtapp:setting>

    <mtapp:setting
      id="audio-multiple"
      label="<__trans phrase="Multiple">">
      <label>
        <input type="checkbox" name="audio-multiple" id="audio-multiple" />
        <__trans phrase="Enable multiple selection">
      </label>
    </mtapp:setting>

    <mtapp:setting
      id="audio-can_upload"
      label="<__trans phrase="Can Upload">">
      <label>
        <input type="checkbox" name="audio-can_upload" id="audio-can_upload" />
        <__trans phrase="Can upload or not">
      </label>
    </mtapp:setting>

    <mtapp:setting
       id="audio-min"
       label="<__trans phrase="Min">">
      <input type="text" name="audio-min" id="audio-min" class="text num" />
    </mtapp:setting>

    <mtapp:setting
       id="audio-max"
       label="<__trans phrase="Max">">
      <input type="text" name="audio-max" id="audio-max" class="text num" />
    </mtapp:setting>

    <div id="save-block" class="icon-save icon-left">
      <span class="item-save"><a href="javascript:void(0);" class="save-link"> <__trans phrase="Save content field options"></a></span>
    </div>

  </mtapp:settinggroup>

  <mtapp:settinggroup id="video-options">

    <mtapp:setting
       id="video-label"
       label="<__trans phrase="Label">">
      <input type="text" name="video-label" id="video-label" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="video-hint"
       label="<__trans phrase="Hint">">
      <input type="text" name="video-hint" id="video-hint" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="video-required"
       label="<__trans phrase="Required">">
      <input type="checkbox" name="video-required" id="video-required" /> <label for="video-required"><__trans phrase="Required or not."></label>
    </mtapp:setting>

    <mtapp:setting
       id="video-display"
       label="<__trans phrase="Display">">
      <select name="video-display" id="video-display">
        <option value="force"><__trans phrase="Force"></option>
        <option value="default" selected="selected"><__trans phrase="Default"></option>
        <option value="optional"><__trans phrase="Optional"></option>
        <option value="none"><__trans phrase="None"></option>
      </select>
    </mtapp:setting>

    <mtapp:setting
      id="video-multiple"
      label="<__trans phrase="Multiple">">
      <label>
        <input type="checkbox" name="video-multiple" id="video-multiple" />
        <__trans phrase="Enable multiple selection">
      </label>
    </mtapp:setting>

    <mtapp:setting
      id="video-can_upload"
      label="<__trans phrase="Can Upload">">
      <label>
        <input type="checkbox" name="video-can_upload" id="video-can_upload" />
        <__trans phrase="Can upload or not">
      </label>
    </mtapp:setting>

    <mtapp:setting
       id="video-min"
       label="<__trans phrase="Min">">
      <input type="text" name="video-min" id="video-min" class="text num" />
    </mtapp:setting>

    <mtapp:setting
       id="video-max"
       label="<__trans phrase="Max">">
      <input type="text" name="video-max" id="video-max" class="text num" />
    </mtapp:setting>

    <div id="save-block" class="icon-save icon-left">
      <span class="item-save"><a href="javascript:void(0);" class="save-link"> <__trans phrase="Save content field options"></a></span>
    </div>

  </mtapp:settinggroup>

  <mtapp:settinggroup id="image-options">

    <mtapp:setting
       id="image-label"
       label="<__trans phrase="Label">">
      <input type="text" name="image-label" id="image-label" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="image-hint"
       label="<__trans phrase="Hint">">
      <input type="text" name="image-hint" id="image-hint" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="image-required"
       label="<__trans phrase="Required">">
      <input type="checkbox" name="image-required" id="image-required" /> <label for="image-required"><__trans phrase="Required or not."></label>
    </mtapp:setting>

    <mtapp:setting
       id="image-display"
       label="<__trans phrase="Display">">
      <select name="image-display" id="image-display">
        <option value="force"><__trans phrase="Force"></option>
        <option value="default" selected="selected"><__trans phrase="Default"></option>
        <option value="optional"><__trans phrase="Optional"></option>
        <option value="none"><__trans phrase="None"></option>
      </select>
    </mtapp:setting>

    <mtapp:setting
      id="image-multiple"
      label="<__trans phrase="Multiple">">
      <label>
        <input type="checkbox" name="image-multiple" id="image-multiple" />
        <__trans phrase="Enable multiple selection">
      </label>
    </mtapp:setting>

    <mtapp:setting
      id="image-can_upload"
      label="<__trans phrase="Can Upload">">
      <label>
        <input type="checkbox" name="image-can_upload" id="image-can_upload" />
        <__trans phrase="Can upload or not">
      </label>
    </mtapp:setting>

    <mtapp:setting
       id="image-min"
       label="<__trans phrase="Min">">
      <input type="text" name="image-min" id="image-min" class="text num" />
    </mtapp:setting>

    <mtapp:setting
       id="image-max"
       label="<__trans phrase="Max">">
      <input type="text" name="image-max" id="image-max" class="text num" />
    </mtapp:setting>

    <div id="save-block" class="icon-save icon-left">
      <span class="item-save"><a href="javascript:void(0);" class="save-link"> <__trans phrase="Save content field options"></a></span>
    </div>

  </mtapp:settinggroup>

  <mtapp:settinggroup id="category-options">

    <mtapp:setting
       id="category-label"
       label="<__trans phrase="Label">">
      <input type="text" name="category-label" id="category-label" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="category-hint"
       label="<__trans phrase="Hint">">
      <input type="text" name="category-hint" id="category-hint" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="category-required"
       label="<__trans phrase="Required">">
      <input type="checkbox" name="category-required" id="category-required" /> <label for="category-required"><__trans phrase="Required or not."></label>
    </mtapp:setting>

    <mtapp:setting
       id="category-display"
       label="<__trans phrase="Display">">
      <select name="category-display" id="category-display">
        <option value="force"><__trans phrase="Force"></option>
        <option value="default" selected="selected"><__trans phrase="Default"></option>
        <option value="optional"><__trans phrase="Optional"></option>
        <option value="none"><__trans phrase="None"></option>
      </select>
    </mtapp:setting>

    <mtapp:setting
      id="category-multiple"
      label="<__trans phrase="Multiple">">
      <label>
        <input type="checkbox" name="category-multiple" id="category-multiple" />
        <__trans phrase="Enable multiple selection">
      </label>
    </mtapp:setting>

    <mtapp:setting
       id="category-can_add"
       label="<__trans phrase="Can add">">
      <input type="checkbox" name="category-can_add" id="category-can_add" /> <label for="category-can_add"><__trans phrase="Can add or not."></label>
    </mtapp:setting>

    <mtapp:setting
       id="category-min"
       label="<__trans phrase="Min">">
      <input type="text" name="category-min" id="category-min" class="text num" />
    </mtapp:setting>

    <mtapp:setting
       id="category-max"
       label="<__trans phrase="Max">">
      <input type="text" name="category-max" id="category-max" class="text num" />
    </mtapp:setting>

    <mtapp:setting
       id="category-category_list"
       label="<__trans phrase="Category List">">
      <select name="category-category_list" id="category-category_list">
      <mt:loop name="category_lists">
        <option value="<mt:var name="id" escape="html">"><mt:var name="name" escape="html"></option>
      </mt:loop>
      </select>
    </mtapp:setting>

    <div id="save-block" class="icon-save icon-left">
      <span class="item-save"><a href="javascript:void(0);" class="save-link"> <__trans phrase="Save content field options"></a></span>
    </div>

  </mtapp:settinggroup>

  <mtapp:settinggroup id="tag-options">

    <mtapp:setting
       id="tag-label"
       label="<__trans phrase="Label">">
      <input type="text" name="tag-label" id="tag-label" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="tag-hint"
       label="<__trans phrase="Hint">">
      <input type="text" name="tag-hint" id="tag-hint" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="tag-required"
       label="<__trans phrase="Required">">
      <input type="checkbox" name="tag-required" id="tag-required" /> <label for="tag-required"><__trans phrase="Required or not."></label>
    </mtapp:setting>

    <mtapp:setting
       id="tag-display"
       label="<__trans phrase="Display">">
      <select name="tag-display" id="tag-display">
        <option value="force"><__trans phrase="Force"></option>
        <option value="default" selected="selected"><__trans phrase="Default"></option>
        <option value="optional"><__trans phrase="Optional"></option>
        <option value="none"><__trans phrase="None"></option>
      </select>
    </mtapp:setting>

    <mtapp:setting
      id="tag-multiple"
      label="<__trans phrase="Multiple">">
      <label>
        <input type="checkbox" name="tag-multiple" id="tag-multiple" />
        <__trans phrase="Enable multiple selection">
      </label>
    </mtapp:setting>

    <mtapp:setting
       id="tag-can_add"
       label="<__trans phrase="Can add">">
      <input type="checkbox" name="tag-can_add" id="tag-can_add" /> <label for="tag-can_add"><__trans phrase="Can add or not."></label>
    </mtapp:setting>

    <mtapp:setting
       id="tag-min"
       label="<__trans phrase="Min">">
      <input type="text" name="tag-min" id="tag-min" class="text num" />
    </mtapp:setting>

    <mtapp:setting
       id="tag-max"
       label="<__trans phrase="Max">">
      <input type="text" name="tag-max" id="tag-max" class="text num" />
    </mtapp:setting>

    <mtapp:setting
       id="tag-initial_value"
       label="<__trans phrase="Initial Value">">
      <input type="text" name="tag-initial_value" id="tag-initial_value" class="text med" />
    </mtapp:setting>

    <div id="save-block" class="icon-save icon-left">
      <span class="item-save"><a href="javascript:void(0);" class="save-link"> <__trans phrase="Save content field options"></a></span>
    </div>

  </mtapp:settinggroup>

  <mtapp:settinggroup id="list-options">

    <mtapp:setting
       id="list-label"
       label="<__trans phrase="Label">">
      <input type="text" name="list-label" id="list-label" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="list-hint"
       label="<__trans phrase="Hint">">
      <input type="text" name="list-hint" id="list-hint" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="list-required"
       label="<__trans phrase="Required">">
      <input type="checkbox" name="list-required" id="list-required" /> <label for="list-required"><__trans phrase="Required or not."></label>
    </mtapp:setting>

    <mtapp:setting
       id="list-display"
       label="<__trans phrase="Display">">
      <select name="list-display" id="list-display">
        <option value="force"><__trans phrase="Force"></option>
        <option value="default" selected="selected"><__trans phrase="Default"></option>
        <option value="optional"><__trans phrase="Optional"></option>
        <option value="none"><__trans phrase="None"></option>
      </select>
    </mtapp:setting>

    <mtapp:setting
       id="list-bullet_or_numbered"
       label="<__trans phrase="Bullet or Numbered">">
      <label>
        <input type="radio" name="list-bullet_or_numbered" id="list-bullet_or_numbered-bullet" value="bullet" checked="checked" />
        <__trans phrase="Bullet">
      </label>
      <label>
        <input type="radio" name="list-bullet_or_numbered" id="list-bullet_or_numbered-numbered" value="numbered" />
        <__trans phrase="Numbered">
      </label>
    </mtapp:setting>

    <div id="save-block" class="icon-save icon-left">
      <span class="item-save"><a href="javascript:void(0);" class="save-link"> <__trans phrase="Save content field options"></a></span>
    </div>

  </mtapp:settinggroup>

  <mtapp:settinggroup id="table-options">

    <mtapp:setting
       id="table-label"
       label="<__trans phrase="Label">">
      <input type="text" name="table-label" id="table-label" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="table-hint"
       label="<__trans phrase="Hint">">
      <input type="text" name="table-hint" id="table-hint" class="text med" />
    </mtapp:setting>

    <mtapp:setting
       id="table-display"
       label="<__trans phrase="Display">">
      <select name="table-display" id="table-display">
        <option value="force"><__trans phrase="Force"></option>
        <option value="default" selected="selected"><__trans phrase="Default"></option>
        <option value="optional"><__trans phrase="Optional"></option>
        <option value="none"><__trans phrase="None"></option>
      </select>
    </mtapp:setting>

    <mtapp:setting
       id="table-initial_rows"
       label="<__trans phrase="Initial Rows">">
      <input type="text" name="table-initial_rows" id="table-initial_rows" class="text num" value="5" />
    </mtapp:setting>

    <mtapp:setting
       id="table-row_headers"
       label="<__trans phrase="Row Headers">">
      <input type="text" name="table-row_headers" id="table-row_headers" class="text long" />
    </mtapp:setting>

    <mtapp:setting
       id="table-changeable_rows"
       label="<__trans phrase="Changeable Rows">">
      <label>
        <input type="checkbox" name="table-changeable_rows" id="table-changeable_rows" value="1" />
        <__trans phrase="Changeable Rows">
      </label>
    </mtapp:setting>

    <mtapp:setting
       id="table-initial_columns"
       label="<__trans phrase="Initial Columns">">
      <input type="text" name="table-initial_columns" id="table-initial_columns" class="text num" value="5" />
    </mtapp:setting>

    <mtapp:setting
       id="table-column_headers"
       label="<__trans phrase="Column Headers">">
      <input type="text" name="table-column_headers" id="table-column_headers" class="text long" />
    </mtapp:setting>

    <mtapp:setting
       id="table-changeable_columns"
       label="<__trans phrase="Changeable Columns">">
      <label>
        <input type="checkbox" name="table-changeable_columns" id="table-changeable_columns" value="1" />
        <__trans phrase="Changeable Columns">
      </label>
    </mtapp:setting>

    <div id="save-block" class="icon-save icon-left">
      <span class="item-save"><a href="javascript:void(0);" class="save-link"> <__trans phrase="Save content field options"></a></span>
    </div>

  </mtapp:settinggroup>

  <mt:setvarblock name="action_buttons">
    <button
       type="button"
       id="save-button"
       accesskey="s"
       title="<__trans phrase="Save changes to these settings (s)">"
       class="save action primary button disabled">
      <__trans phrase="Save Changes">
    </button> 
  </mt:setvarblock>
  <mt:include name="include/actions_bar.tmpl" bar_position="bottom" hide_pager="1" settings_bar="1">

</mtapp:form>

<mt:setvarblock name="jq_js_include" append="1">
  jQuery(function() {
    jQuery('input[type="text"]').keyup(function() {
      setDirty(true);
    });
    jQuery('input[type="radio"]').change(function() {
      setDirty(true);
    });

<mt:unless name="id">    
    var data = JSON.parse( localStorage.getItem("ContentType") );
    jQuery("#setting-title").text( trans( 'Edit [_1]', data.name ) );
</mt:unless>
<mt:if name="name">
    jQuery("#setting-title").text( trans( 'Edit [_1]', '<mt:var name="name">' ) );
    var data = {};
    data['name'] = '<mt:var name="name">';
    data['description'] = '<mt:var name="description">';
    data['fields'] = {
    <mt:loop name="fields">
      '<mt:var name="content_field_id">': {
        'type': '<mt:var name="type">',
        'new': 0,
        'options': {
    <mt:loop name="options">
        <mt:var name="key">: '<mt:var name="value">',
    </mt:loop>
        }
      }<mt:unless name="__last__">,</mt:unless>
    </mt:loop>
    };
    <mt:loop name="fields">
    add_field('<mt:var name="content_field_id">', '<mt:var name="type">', '<mt:var name="__counter__">');
    </mt:loop>
    localStorage.setItem("ContentType", JSON.stringify(data));
</mt:if>
    all_options_hidden();
    set_events();
    set_sortable();
  });

  jQuery('#save-button').click( function() {
    setDirty(false);
    var datalist = localStorage.getItem("ContentType");
    var id = jQuery("#id").val();
    jQuery('<form/>', {action: "<mt:var name="script_url">", method: 'post'})
    .append(jQuery('<input/>', {type: 'hidden', name: '__mode',      value: 'save_cfg_content_type'}))
    .append(jQuery('<input/>', {type: 'hidden', name: 'magic_token', value: '<mt:var name="magic_token">'}))
    .append(jQuery('<input/>', {type: 'hidden', name: 'blog_id',     value: '<mt:var name="blog_id">'}))
    .append(jQuery('<input/>', {type: 'hidden', name: 'id',          value: '<mt:var name="id">'}))
    .append(jQuery('<input/>', {type: 'hidden', name: 'data',        value: datalist}))
    .appendTo(document.body)
    .submit();
  });

  jQuery('.add-link').click(function() {
    var selected = jQuery('select#type').val();
    if ( !selected )
      return false;
    if ( jQuery('.add-link').hasClass('disabled') )
      return false;
    var length = jQuery('#sortable').sortable('toArray').length;
    var id = length + 1;
    var type_name = jQuery("#type").val();
    add_field(id, type_name, id);
    var data = JSON.parse( localStorage.getItem("ContentType") );
    if (!data['fields'])
        data['fields'] = {};
    if (!data['fields'][id])
        data['fields'][id] = {};
    data['fields'][id]['type'] = type_name;
    data['fields'][id]['order'] = id;
    data['fields'][id]['new'] = 1;
    localStorage.setItem("ContentType", JSON.stringify(data));
    set_sortable();
    set_events();
    return false;
  });

  function add_field(id, type, order) {
    var field = '<div id="content-field-block-' + id + '" class="field field-top-label sort-enabled">';
    field += '<div class="field-header">';
    field += '<label id="content-field-label" for="content-field">' + type + '</label>';
    field += '</div>';
    field += '<div class="field-content">';
    field += '<ul class="action-link-list">';
    field += '<li>';
    field += '<input type="radio" name="content-label" id="content-label" value="" />';
    field += '<label for="content-label"> Label for list screen</label>';
    field += '</li>';
    field += '<li>';
    field += '<a href="javascript:void(0);" class="icon-left icon-edit edit-link">';
    field += '<__trans phrase="Edit">';
    field += '</a>';
    field += '</li>';
    field += '<li>';
    field += '<a href="javascript:void(0);" class="icon-left icon-delete delete-link">';
    field += '<__trans phrase="Delete">';
    field += '</a>';
    field += '</li>';
    field += '</ul>';
    field += '<input type="hidden" id="order-' + id + '" value="' + order + '" />';
    field += '<input type="hidden" id="type-' + id + '" value="' + type + '" />';
    field += '</div>';
    field += '</div>';
    jQuery("#sortable").append(field);
  }

  function set_events() {
    jQuery('a.delete-link').unbind('click').click(function() {
      if (! confirm(trans('Are you sure you want to remove this settings?'))) {
        return false;
      }
      var block = jQuery(this).parent().parent().parent().parent();
      block.remove();
      var current_id = block.attr("id").match(/\d+/);
      var data = JSON.parse( localStorage.getItem("ContentType") );
      if (data['fields'][current_id]['new'] === 0) {
        if (data['removed_fields']) {
          data['removed_fields'] += ',' + current_id;
        }
        else {
          data['removed_fields'] = String(current_id);
        }
      }
      delete data['fields'][current_id];
      localStorage.setItem("ContentType", JSON.stringify(data));
      setDirty(true);
      if (! jQuery('.content-field-header')[1] ) {
        jQuery('a.delete-link').toggleClass('hidden');
      }
      return false;
    });
    jQuery('a.edit-link').click(function() {
      all_options_hidden();
      var block = jQuery(this).parent().parent().parent().parent();
      var current_id = block.attr("id").match(/\d+/);
      var type_name = jQuery("#type-" + current_id).val();
      var options = jQuery('#' + type_name + '-options');
      options.css( 'display', 'block' );
      jQuery("#current_field_id").val(current_id);
      var data = JSON.parse( localStorage.getItem("ContentType") );
      if (!data['fields'] || !data['fields'][current_id] || !data['fields'][current_id]['options'])
          return true;
      var regexp = new RegExp(type_name + '-(.*)');
      options.find("input").each(function(index, element) {
        var input_type = jQuery(element).attr("type");
        if (input_type === 'hidden')
          return true;
        if (input_type === 'radio') {
          var opt_name = (jQuery(element).attr('name').match(regexp))[1];
        } else {
          var opt_id = jQuery(element).attr("id");
          var opt_name = (opt_id.match(regexp))[1];
        }
        var opt_val = '';
        if (data['fields'][current_id] && data['fields'][current_id]['options'] && data['fields'][current_id]['options'][opt_name])
          opt_val = data['fields'][current_id]['options'][opt_name];
        if (input_type === 'checkbox') {
          if (opt_val === 1 || opt_val === '1')
            jQuery(element).prop("checked", true);
        }
        else if (input_type === 'radio') {
          if (jQuery(element).val() === opt_val) {
            jQuery(element).prop('checked', 'checked');
          }
        }
        else {
          jQuery(element).val(opt_val);
        }
      });
      options.find("select").each(function(index, element) {
        var opt_id = jQuery(element).attr("id");
        var opt_name = (opt_id.match(regexp))[1];
        if (data['fields'][current_id] && data['fields'][current_id]['options'] && data['fields'][current_id]['options'][opt_name])
          jQuery(element).val(data['fields'][current_id]['options'][opt_name]);
      });
      options.find("textarea").each(function(index, element) {
        var opt_id = jQuery(element).attr("id");
        var opt_name = (opt_id.match(regexp))[1];
        if (data['fields'][current_id] && data['fields'][current_id]['options'] && data['fields'][current_id]['options'][opt_name])
          jQuery(element).val(data['fields'][current_id]['options'][opt_name]);
      });
      var count = 1;
      jQuery('div.' + type_name + '-values').remove();
      while (data['fields'][current_id] && data['fields'][current_id]['options'] && data['fields'][current_id]['options']['values_key_' + count]) {
        var add_button = jQuery('#' + type_name + '-values-field').find('a.add-values-list');
        var key = data['fields'][current_id]['options']['values_key_' + count];
        var value = data['fields'][current_id]['options']['values_value_' + count];
        addList(add_button, key, value);
        count++;
      }
      setDirty(false);
    });
    jQuery('a.save-link').unbind('click').click(function() {
      var options = jQuery(this).parent().parent().parent();
      var id = options.attr("id");
      var type_name = (id.match(/(.*)-options/))[1];
      var current_id = jQuery("#current_field_id").val();
      var regexp = new RegExp(type_name + '-(.*)');
      var data = JSON.parse( localStorage.getItem("ContentType") );
      data['fields'][current_id]['order'] = jQuery('#order-' + current_id).val();
      options.find("input").each(function(index, element) {
        var input_type = jQuery(element).attr("type");
        if (input_type === 'hidden')
          return true;
        if (input_type === 'radio') {
          if (!jQuery(element).prop('checked')) {
            return;
          }
          var opt_name = (jQuery(element).attr('name').match(regexp))[1];
          var opt_val = jQuery(element).val();
        } else {
          var opt_id = jQuery(element).attr("id");
          var opt_name = (opt_id.match(regexp))[1];
          var opt_val = '';
          if (input_type === 'checkbox') {
            opt_val = jQuery(element).prop('checked') ? 1 : 0;
          }
          else {
            opt_val = jQuery(element).val();
          }
        }
        if (!data['fields'][current_id]['options'])
          data['fields'][current_id]['options'] = {};
        data['fields'][current_id]['options'][opt_name] = opt_val;
        if (input_type === 'checkbox' || input_type === 'radio') {
          jQuery(element).prop("checked", false);
        }
        else {
          jQuery(element).val('');
        }
      });
      options.find("select").each(function(index, element) {
        var opt_id = jQuery(element).attr("id");
        var opt_name = (opt_id.match(regexp))[1];
        var opt_val = jQuery(element).val();
        if (!data['fields'][current_id]['options'])
          data['fields'][current_id]['options'] = {};
        data['fields'][current_id]['options'][opt_name] = opt_val;
        jQuery(element).val('');
      });
      options.find("textarea").each(function(index, element) {
        var opt_id = jQuery(element).attr("id");
        var opt_name = (opt_id.match(regexp))[1];
        var opt_val = jQuery(element).val();
        if (!data['fields'][current_id]['options'])
          data['fields'][current_id]['options'] = {};
        data['fields'][current_id]['options'][opt_name] = opt_val;
        jQuery(element).val('');
      });
      localStorage.setItem("ContentType", JSON.stringify(data));
      options.css( 'display', 'none' );
      setDirty(true);
    });
    jQuery('a.add-values-list').unbind('click').click(function() {
      addList(this, "", "");
    });
  }

  function set_sortable() {
    jQuery('#sortable').sortable({
      items: 'div.field.sort-enabled',
      placeholder: 'placeholder',
      distance: 3,
      opacity: 0.8,
      cursor: 'move',
      forcePlaceholderSize: true,
      handle: '.field-header',
      containment: 'body',
      update: function () {
        var count = 1;
        jQuery(order).each( function() {
          var id = this.match(/\d+/);
          jQuery('#order-' + id).val(count);
          count++;
          setDirty(true);
        });
      }
    });
  }

  function all_options_hidden() {
    var contentFieldTypesOptions = <mt:var name="content_field_types_options">;
    jQuery.each( contentFieldTypesOptions, function( key, val ) {
        jQuery('#' + key + '-options').css( 'display', 'none' );
    });
  }

  function removeList(removeButton) {
    var class_name = jQuery(removeButton).parent().attr('class');
    var type_name = (class_name.match(/(.*)-values/))[1];
    jQuery(removeButton).parent().remove();
    setDirty(true);
    jQuery('.' + type_name + '-values').each( function(index, element) {
      var prefix = type_name + '-values_';
      var number = index + 1;
      jQuery(this).children('[id^=' + prefix + 'key_]').attr('id', prefix + 'key_' + number);
      jQuery(this).children('[id^=' + prefix + 'value_]').attr('id', prefix + 'value_' + number);
    });
  }

  function addList( addButton, key, value ) {
    var id = jQuery(addButton).parent().parent().parent().attr("id");
    var type_name = (id.match(/(.*)-options/))[1];
    var div = jQuery('.' + type_name + '-values');
    var number = div.length + 1;
    var newDiv = '<div class="' + type_name + '-values">' + "\n";
    newDiv += '  <input name="' + type_name + '-values_key" id="' + type_name + '-values_key_' + number + '" class="text short" value="' + key + '" placeholder="Key" />' + "\n";
    newDiv += ':';
    newDiv += '  <input name="' + type_name + '-values_value" id="' + type_name + '-values_value_' + number + '" class="text short" value="' + value + '" placeholder="Value" />' + "\n";
    newDiv += '  <a href="javascript:void(0)" class="remove-values-list"><img src="<mt:var name="static_uri">images/status_icons/close.gif" /></a>' + "\n";
    newDiv += '</div>' + "\n";
  
    jQuery(addButton).before(newDiv);
  
    jQuery('a.remove-values-list').unbind('click').click(function() {
      removeList(this);
    });

    setDirty(true);
  }
</mt:setvarblock>

<mt:include name="include/footer.tmpl">
